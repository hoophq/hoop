config:
  ORG_MULTI_TENANT: 'true'
  POSTGRES_DB_URI: "${HOOP_SELF_HOSTED_MULTITENANT_POSTGRES_DB_URI}"
  PGREST_ROLE: 'hoop_apiuser_multitenant'
  AUTO_REGISTER: 'false'
  LOG_LEVEL: 'info'
  API_URL: 'https://use.hoop.dev'
  IDP_URI: "https://${HOOP_SELF_HOSTED_MULTITENANT_IDP_CLIENT_ID}:${HOOP_SELF_HOSTED_MULTITENANT_IDP_CLIENT_SECRET}@auth.hoop.dev/"
  IDP_AUDIENCE: 'https://hoophq.us.auth0.com/api/v2/'
  AGENTCONTROLLER_CREDENTIALS: '${HOOP_SELF_HOSTED_MULTITENANT_AGENTCONTROLLER_CREDENTIALS}'
  ASK_AI_CREDENTIALS: '${HOOP_SELF_HOSTED_MULTITENANT_ASK_AI_CREDENTIALS}'
  GOOGLE_APPLICATION_CREDENTIALS_JSON: '${GOOGLE_APPLICATION_CREDENTIALS_JSON}'
  WEBHOOK_APPKEY: "${HOOP_SELF_HOSTED_MULTITENANT_WEBHOOK_APPKEY}"
  PLUGIN_AUDIT_PATH: '/opt/hoop/sessions'
  PLUGIN_INDEX_PATH: '/opt/hoop/sessions/indexes'
  PLUGIN_REGISTRY_URL: 'https://pluginregistry.s3.amazonaws.com/packages.json'

persistence:
  # -- Use persistent volume for write ahead log sessions
  enabled: true
  storageClassName: gp2

  # -- Size of persistent volume claim
  size: 10Gi

ingressApi:
  enabled: true
  host: ''
  ingressClassName: alb
  annotations:
    alb.ingress.kubernetes.io/group.name: usegroup
    alb.ingress.kubernetes.io/healthcheck-path: /
    alb.ingress.kubernetes.io/healthcheck-protocol: HTTP
    alb.ingress.kubernetes.io/listen-ports: '[{"HTTPS": 443}]'
    alb.ingress.kubernetes.io/scheme: internet-facing
    alb.ingress.kubernetes.io/ssl-redirect: "443"
    alb.ingress.kubernetes.io/target-type: ip

  tls:
  - hosts:
    - use.hoop.dev
    - app.hoop.dev

ingressGrpc:
  enabled: true
  host: ''
  ingressClassName: alb
  annotations:
    alb.ingress.kubernetes.io/backend-protocol-version: GRPC
    alb.ingress.kubernetes.io/group.name: usegroup
    alb.ingress.kubernetes.io/healthcheck-path: /
    alb.ingress.kubernetes.io/healthcheck-protocol: HTTP
    alb.ingress.kubernetes.io/listen-ports: '[{"HTTPS": 8443}]'
    alb.ingress.kubernetes.io/scheme: internet-facing
    alb.ingress.kubernetes.io/target-type: ip

  tls:
  - hosts:
    - use.hoop.dev
    - app.hoop.dev

# -- CPU/Memory resource requests/limits
resources:
  gw:
    limits:
      cpu: 2048m
      memory: 4Gi
    requests:
      cpu: 1024m
      memory: 4Gi

affinity:
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
      - matchExpressions:
        - key: topology.kubernetes.io/zone
          operator: In
          values:
          - us-east-1a